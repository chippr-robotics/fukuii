# Cirith Ungol - Ethereum Classic Mainnet SNAP Sync Profile
# Focus: Validate SNAP state sync interoperability with public ETC peers

include "base.conf"

fukuii {
  blockchains {
    # Target canonical Ethereum Classic mainnet
    network = "etc"
  }

  sync {
    # SNAP gets priority when enabled so fast-sync is turned off intentionally
    do-snap-sync = false
    do-fast-sync = true

    # SNAP ranges can be large, extend response windows to avoid flapping peers
    peer-response-timeout = 90.seconds
    blacklist-duration = 60.seconds
    critical-blacklist-duration = 30.minutes

    snap-sync {
      enabled = false
      pivot-block-offset = 128
      account-concurrency = 16
      storage-concurrency = 8
      storage-batch-size = 8
      healing-batch-size = 16
      max-retries = 5
      timeout = 60.seconds
      max-snap-sync-failures = 50
    }
  }

  network {
    peer {
      # Maximum number of peers that can be connecting to this node
      max-pending-peers = 200
      p2p-version = 4

      # Reduced timers let us retry incompatible peers quickly without hammering them
      short-blacklist-duration = 2.minutes
      long-blacklist-duration = 45.minutes
    }
  }

  logging {
    # Keep detailed traces of SNAP coordination for log-based validation
    logs-dir = "/app/logs"
    logs-file = "cirith-ungol-fast"
    logs-level = "DEBUG"
    json-output = false
  }
}
