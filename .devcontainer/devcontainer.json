{
  "name": "Fukuii Scala Development",
  "image": "mcr.microsoft.com/devcontainers/java:11",
  
  "features": {
    "ghcr.io/devcontainers/features/java:1": {
      "version": "11",
      "jdkDistro": "tem"
    },
    "ghcr.io/devcontainers/features/git:1": {
      "version": "latest"
    }
  },
  
  "customizations": {
    "vscode": {
      "extensions": [
        "scalameta.metals",
        "scala-lang.scala",
        "ms-vscode.vscode-typescript-next"
      ],
      "settings": {
        "metals.javaHome": "/usr/local/sdkman/candidates/java/11.0.20-tem",
        "java.home": "/usr/local/sdkman/candidates/java/11.0.20-tem",
        "files.watcherExclude": {
          "**/target/**": true,
          "**/.bloop/**": true,
          "**/.metals/**": true
        }
      }
    }
  },
  
  "postCreateCommand": "git submodule update --init --recursive && echo 'deb https://repo.scala-sbt.org/scalasbt/debian all main' | sudo tee /etc/apt/sources.list.d/sbt.list && echo 'deb https://repo.scala-sbt.org/scalasbt/debian /' | sudo tee /etc/apt/sources.list.d/sbt_old.list && curl -sL 'https://keyserver.ubuntu.com/pks/lookup?op=get&search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823' | sudo apt-key add && sudo apt-get update && sudo apt-get install -y sbt",
  
  "containerEnv": {
    "FUKUII_DEV": "true",
    "JAVA_OPTS": "-Xms1g -Xmx4g -XX:ReservedCodeCacheSize=1024m -XX:MaxMetaspaceSize=1g -Xss4M"
  },
  
  "remoteUser": "vscode",
  
  "mounts": [
    "source=${localWorkspaceFolder}/.ivy2,target=/home/vscode/.ivy2,type=bind,consistency=cached",
    "source=${localWorkspaceFolder}/.sbt,target=/home/vscode/.sbt,type=bind,consistency=cached"
  ]
}
