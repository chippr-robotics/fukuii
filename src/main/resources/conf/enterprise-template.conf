# Enterprise Network Configuration Template
# This is a reference configuration for deploying Fukuii on private/permissioned EVM networks
# following industry best practices for enterprise blockchain deployments.
#
# Usage:
#   1. Copy this file to your custom config location
#   2. Customize the values for your network
#   3. Launch with: fukuii enterprise -Dconfig.file=/path/to/your-enterprise.conf
#
# Note: The 'enterprise' modifier automatically configures:
#   - Public discovery: disabled
#   - Port forwarding: disabled  
#   - RPC interface: localhost only
#   - Peer blacklisting: disabled
#
# See docs/runbooks/custom-networks.md for detailed configuration guide

include "app.conf"

fukuii {
  # Custom client identity for your enterprise network
  client-identity = "YourCompany/Fukuii/v1.0.0"
  
  # Data directory for this enterprise network
  # datadir = "/opt/fukuii/data/enterprise-network"
  
  blockchains {
    # Set this to your custom network name
    # Must match the chain config file name: <network>-chain.conf
    network = "enterprise-network"
    
    # Optional: Directory containing custom chain configuration files
    # Place your enterprise-network-chain.conf file here
    # custom-chains-dir = "/etc/fukuii/chains"
    
    # Define your enterprise network configuration inline
    # Or use custom-chains-dir to load from external file
    enterprise-network {
      # Network identifier for peer discovery and handshaking
      # Choose a unique ID not used by public networks
      network-id = 88888
      
      # Chain ID for transaction signing (EIP-155)
      # IMPORTANT: Use a unique chain ID for your enterprise network
      # Common practice: Use your network-id or a different unique value
      # Format: Hex string (e.g., "0x15B38" = 88888 in decimal)
      chain-id = "0x15B38"
      
      # Enable all modern EVM features from genesis for maximum compatibility
      frontier-block-number = "0"
      homestead-block-number = "0"
      eip150-block-number = "0"
      eip155-block-number = "0"
      eip160-block-number = "0"
      byzantium-block-number = "0"
      constantinople-block-number = "0"
      petersburg-block-number = "0"
      istanbul-block-number = "0"
      
      # Disable ETC-specific forks (not relevant for enterprise)
      eip161-block-number = "1000000000000000000"
      atlantis-block-number = "1000000000000000000"
      agharta-block-number = "1000000000000000000"
      phoenix-block-number = "1000000000000000000"
      magneto-block-number = "1000000000000000000"
      mystique-block-number = "1000000000000000000"
      spiral-block-number = "1000000000000000000"
      ecip1098-block-number = "1000000000000000000"
      ecip1097-block-number = "1000000000000000000"
      ecip1099-block-number = "1000000000000000000"
      muir-glacier-block-number = "1000000000000000000"
      berlin-block-number = "1000000000000000000"
      
      # Disable difficulty bomb (not needed in private networks)
      difficulty-bomb-pause-block-number = "0"
      difficulty-bomb-continue-block-number = "0"
      difficulty-bomb-removal-block-number = "0"
      
      # Contract code size limit (24KB is standard)
      max-code-size = "24576"
      
      # DAO fork not applicable
      dao = null
      
      # Account starting nonce
      account-start-nonce = "0"
      
      # Optional: Reference to genesis file
      # Place your genesis JSON file in the same directory
      # custom-genesis-file = { include required("enterprise-network-genesis.json") }
      custom-genesis-file = null
      
      # Treasury address (ETC-specific, can be ignored for enterprise)
      # IMPORTANT: This is a placeholder - change for production networks
      treasury-address = "0000000000000000000000000000000000000000"
      
      # Monetary policy for your enterprise network
      monetary-policy {
        # Block reward in wei (5 ETH = 5000000000000000000 wei)
        # Adjust based on your tokenomics requirements
        first-era-block-reward = "2000000000000000000"
        first-era-reduced-block-reward = "2000000000000000000"
        first-era-constantinople-reduced-block-reward = "2000000000000000000"
        
        # Era duration (number of blocks before reward reduction)
        # Set to very high number to disable reward reduction
        era-duration = 500000000
        
        # Reward reduction rate (0.0 = no reduction)
        reward-reduction-rate = 0
      }
      
      # Gas tie breaker (keep false for standard behavior)
      gas-tie-breaker = false
      
      # Use Ethereum-compatible storage format
      eth-compatible-storage = true
      
      # Bootstrap nodes for your enterprise network
      # These are the initial peer discovery points
      # Format: "enode://PUBLIC_KEY@IP:PORT"
      # To get a node's enode URL, query: curl -X POST --data '{"jsonrpc":"2.0","method":"admin_nodeInfo","params":[],"id":1}' http://localhost:8546
      bootstrap-nodes = [
        # Example: "enode://abcd1234...@192.168.1.100:30303",
        # Example: "enode://efgh5678...@192.168.1.101:30303"
      ]
    }
  }
  
  network {
    server-address {
      # Listening interface for peer connections
      # "0.0.0.0" allows connections from any network interface
      # In enterprise environments, consider binding to specific interface
      interface = "0.0.0.0"
      
      # Port for peer-to-peer communication
      port = 9076
    }
    
    # Disable automatic port forwarding (not needed in enterprise LANs)
    # Overridden by 'enterprise' modifier
    # automatic-port-forwarding = false
    
    discovery {
      # Discovery is disabled by 'enterprise' modifier
      # Peer discovery happens via bootstrap nodes only
      # discovery-enabled = false
      
      # External hostname or IP (if different from listening interface)
      # Useful when behind NAT or load balancer
      host = null
      
      # Discovery listening interface
      interface = "0.0.0.0"
      
      # Discovery port (UDP)
      port = 30303
      
      # Use known nodes from config (enabled by 'enterprise' modifier)
      # reuse-known-nodes = true
    }
    
    peer {
      # Peer connection limits for enterprise deployments
      # Adjust based on your network size and node capacity
      
      # Minimum outgoing peer connections to maintain
      min-outgoing-peers = 5
      
      # Maximum outgoing peer connections
      max-outgoing-peers = 20
      
      # Maximum incoming peer connections
      max-incoming-peers = 15
      
      # Maximum pending peer connections
      max-pending-peers = 10
      
      # Peer connection retry settings
      # Enterprise networks may have more stable connectivity
      connect-retry-delay = 10.seconds
      connect-max-retries = 3
      
      # Blacklist duration (disabled by 'enterprise' modifier for controlled environments)
      # short-blacklist-duration = 0.seconds
      # long-blacklist-duration = 0.seconds
    }
    
    rpc {
      http {
        # HTTP or HTTPS
        mode = "http"
        
        # Enable JSON-RPC HTTP endpoint
        enabled = true
        
        # Listening interface (bound to localhost by 'enterprise' modifier)
        # Override if you need to expose RPC on network
        # SECURITY: Only expose RPC on trusted networks, preferably with authentication
        # interface = "localhost"
        
        # JSON-RPC port
        port = 8546
        
        # CORS allowed origins
        # For production, specify exact origins instead of "*"
        # cors-allowed-origins = ["https://yourdapp.example.com"]
        cors-allowed-origins = []
        
        # Rate limiting (recommended for enterprise environments)
        rate-limit {
          enabled = true
          min-request-interval = 1.second
          latest-timestamp-cache-size = 2048
        }
      }
      
      ipc {
        # IPC is more secure for local administration
        enabled = true
        # socket-file = ${fukuii.datadir}"/fukuii.ipc"
      }
      
      # Enabled JSON-RPC APIs
      # For enterprise: disable 'test' and 'qa' in production
      # Consider restricting 'personal' and 'debug' based on security requirements
      apis = "eth,web3,net,personal,fukuii,debug"
    }
  }
  
  mining {
    # Mining configuration for your enterprise network
    
    # Set this to the coinbase address that receives block rewards
    # CRITICAL: Change this placeholder address to your actual validator/miner address!
    # Using this default value will result in lost block rewards.
    # Generate a proper address with: fukuii cli generate-private-key
    coinbase = "0000000000000000000000000000000000000000"
    
    # Extra data in mined blocks (max 32 bytes)
    # Can be used for node identification or versioning
    header-extra-data = "Enterprise Network v1.0"
    
    # Mining protocol: pow (Proof of Work) or mocked (for testing)
    # Use 'mocked' for development/testing with instant blocks
    protocol = pow
    
    # Enable/disable mining on this node
    # Set to true for validator/miner nodes
    mining-enabled = false
  }
  
  sync {
    # Synchronization settings for enterprise networks
    
    # Fast sync may not be necessary in private networks with small chain size
    # Disable for controlled deployments starting from genesis
    do-fast-sync = false
    
    # SNAP sync not typically needed in enterprise networks
    do-snap-sync = false
    
    # Blacklist duration (disabled by 'enterprise' modifier)
    # In controlled networks, you typically trust all peers
    # blacklist-duration = 0.seconds
    # critical-blacklist-duration = 0.seconds
  }
  
  txPool {
    # Transaction pool settings
    
    # Maximum pending transactions in pool
    # Adjust based on expected transaction volume
    tx-pool-size = 4096
    
    pending-tx-manager-query-timeout = 60.seconds
    transaction-timeout = 5.minutes
  }
}

# Logging configuration
# Configure appropriate log levels for production vs development
# logback.xml controls the actual logging output

# Security recommendations for enterprise deployments:
# 1. Use TLS/HTTPS for RPC if exposed on network (see docs/runbooks/tls-operations.md)
# 2. Implement firewall rules to restrict P2P and RPC access
# 3. Use VPN or private network for inter-node communication
# 4. Rotate node keys periodically
# 5. Monitor and audit RPC access logs
# 6. Use IPC instead of HTTP RPC for local administration
# 7. Implement rate limiting on RPC endpoints
# 8. Consider using permissioned mining/validation (restricted-pow protocol)
# 9. Backup node keys and configuration securely
# 10. Document and version your network configuration

# Performance recommendations:
# 1. Allocate sufficient JVM heap memory (-Xmx flag)
# 2. Use SSD storage for better I/O performance
# 3. Monitor database size and plan for growth
# 4. Tune peer connection limits based on network size
# 5. Consider dedicated hardware for validator nodes
# 6. Monitor system resources (CPU, memory, disk, network)

# For more information:
# - Custom Networks Guide: docs/runbooks/custom-networks.md
# - Node Configuration: docs/runbooks/node-configuration.md
# - Security Runbook: docs/runbooks/security.md
